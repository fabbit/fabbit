<div class="popover" id="input_popover">
  <div class="box">
    <div class="closer"> x </div>
    <div class="content">
      <div class="row space"> Add a new annotation </div>
      <div class="row space"> <input type="text" placeholder="Enter annotation name" id="annot_input" /> </div>
      <div class="row"> <div class="submit inset green" id="annot_submit" > Submit </div> </div>
    </div>
  </div>
</div>


<script>

  function getInput(callback,point) {
    $("#input_popover").show();
    $("#annot_input").focus();

    $("#input_popover .box .closer").unbind("click");
    $("#input_popover .box .closer").click(function(){
      $("#annot_input").val("");
      callback("", null);
    });


    function returnInput(){
      var value = $($("#annot_input")[0]).val();
      $("#input_popover").hide();
      $("#annot_input").val("");
      callback(value,point);
    }
    
    $("#input_popover #annot_input").unbind("keypress");
    $("#input_popover #annot_input").keypress(function(e){
      if (e.which == 13) {
        returnInput();
      }
    })

    $("#input_popover #annot_submit").unbind("click");
    $("#input_popover #annot_submit").click(function(){
      returnInput();
    });
  }
  
</script>      